- name: Upgrade System
  apt: upgrade=dist update_cache=yes

- name: Add php repository
  apt_repository:
   repo: 'ppa:ondrej/php'

- name: Upgrade System
  apt: upgrade=dist update_cache=yes

- name: Install PHP
  apt: name=php state=latest

- name: Install PHP MB
  apt: name=php-mbstring state=latest

- name: Install PHP XML
  apt: name=php-xml state=latest

- name: Install unzip
  apt: name=unzip state=latest


- name: Download php-composer
  get_url:
    url: https://getcomposer.org/installer
    dest: /tmp/installer

- name: create composer file 
  shell: sudo touch /usr/local/bin/composer

- name: install composer
  shell: cat /tmp/installer | php -- --install-dir=/usr/local/bin
  args:
    creates: /usr/local/bin/composer

- name: rename composer.phar to composer
  shell: mv /usr/local/bin/composer.phar /usr/local/bin/composer
  args:
    creates: /usr/local/bin/composer

- name: make composer executable
  file: 
    path: /usr/local/bin/composer
    mode: a+x
    state: file
